#!/usr/bin/awk -f

# 引数として-v mpc_current="${mpc_current}"が必須
BEGIN{

	# 区切り文字を"行頭が数字の1回以上の繰り返しかつ:"に指定
	FS = "^[0-9]*:"

}

{
		
	# 引数で渡された変数が"queued"であれば真
	if(script_name == "queued"){

		# "current"が第2フィールドと一致すれば真
		if(mpc_current == $2){

			marker = "<b>[Now Playing]</b>"

		}else{

			marker = ""

		}

		# "ID:楽曲"を"ID>楽曲"に置換
		sub(":" , ">")

		# 標準入力をタグ化し出力
		print "<p><button name=play value=", $0, "</button>", marker, "</p>"

	# 引数で渡された変数が"directory"であれば真
	}else if(script_name == "directory"){

		# "current"が第2フィールドと一致すれば真
		if(mpc_current == $2){

			marker = "<b>[Now Playing]</b>"

		}else{

			marker = ""

		}

		# "ID:楽曲"を"ID>楽曲"に置換
		sub(":" , ">")

		# 標準入力をタグ化し出力
		print "<p><button name=add value=", $0, "</button>", marker, "</p>"

	}

}
